{% extends "base.html" %}

{% block content %}
<div class="job-list">
    {% for job in jobs %}
    <div class="job-card">
        <h3>{{ job.title }}</h3>
        <p>{{ job.description }}</p>
        <p>Срок: {{ job.srok }} дней</p>
        <p>Оплата: {{ job.money }} руб.</p>
        
        {% if request.cookies.get('user_id') %}
            {% set responded = false %}
            {% for response in job.responses %}
                {% if response.user_id == request.cookies.get('user_id')|int %}
                    {% set responded = true %}
                    <div class="alert alert-info">Вы откликнулись</div>
                {% endif %}
            {% endfor %}
            
            {% if not responded %}
            <form method="post" action="/jobs/respond/{{ job.id }}">
                <button type="submit" class="btn">Откликнуться</button>
            </form>
            {% endif %}
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endblock %}